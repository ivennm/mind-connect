<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mind Connect</title>
    <!-- Link to Font Awesome CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <!-- Your custom stylesheet -->
    <link rel="stylesheet" href="mind_connect.css">
</head>
<body>
    <!-- Navigation -->
    <header class="navigation">
        <div class="logo">Mind Connect</div>
        <div class="nav-controls">
            <div class="toggle-switch">
                <input type="checkbox" id="dark-mode">
                <label for="dark-mode"></label>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1>Welcome to Mind Connect</h1>
            <p>Your AI-powered companion for mental well-being, offering compassionate, 24/7 support and tailored guidance.</p>
        </div>
    </section>

    <!-- Smooth Intersection Curve -->
    <div class="curve"></div>

    <!-- About Us Section -->
    <section class="about-us">
        <div class="about-text">
            <h2>About Mind Connect</h2>
            <p>At Mind Connect, we believe that everyone deserves emotional support. Our AI chatbot is designed to listen, understand, and provide helpful responses that guide you through difficult moments. Whether it's a rough day or a need for someone to talk to, we're here for you â€” with empathy, always.</p>
            <p>We stand for a supportive, safe space for people to connect with their emotions, track mental health habits, and receive the comfort of knowing someone is always there to listen.</p>
        </div>
    </section>

    <!-- Connect Now Section -->
    <section class="connect-now">
        <div class="connect-text">
            <h2>Connect Now</h2>
            <p>Discover AI-driven emotional support with empathetic responses and smart habit tracking. Whether you're feeling stressed, anxious, or need advice, we're here to help you every step of the way.</p>
            <button class="chat-popup" onclick="openChat()">Chat With Our Bot</button>
        </div>
        <img src="{{ url_for('static', filename='artificial-intelligence_10471166.gif') }}" alt="AI Icon">
    </section>

    <!-- Another Curve for Smooth Transition -->
    <div class="curve flip"></div>

    <!-- Astro Bound Section -->
    <section class="astro-bound">
        <img src="rocket-game.png" alt="Astro Bound Game">
        <div class="astro-text">
            <h2>Astro Bound</h2>
            <p>Relax and play a space-themed adventure game designed to ease your mind and promote mindfulness.</p>
            <button class="play-button">Play Now</button>
        </div>
    </section>

    <!-- Floating Chatbot Button -->
    <button id="chatButton" class="chat-button" onclick="openChat()">Chat with our Bot</button>

    <!-- Chatbot Popup -->
<div id="chatPopup" class="chat-popup">
    <div class="chat-header">
        <h3>AI Chatbot</h3>
        <button id="closeChat" class="close-btn" onclick="closeChat()">X</button>
    </div>
    <div id="chatContent" class="chat-content">
        <!-- Chat messages will appear here -->
    </div>
    <div class="chat-input">
        <input type="text" id="userInput" placeholder="Type your message..." onkeydown="checkEnter(event)">
        <div class="icon-buttons">
            <button class="icon-btn" id="startVoiceBtn">
                <i class="fa fa-microphone"></i> <!-- Microphone Icon -->
            </button>
            <button class="icon-btn" id="startCameraBtn" title="Start Camera">
                <i class="fa fa-video-camera"></i> <!-- Camera Icon -->
            </button>
        </div>
    </div>
    <button class="send-btn" onclick="sendMessage()">Send</button>
</div>

<script>
    // Open chat popup
    function openChat() {
        document.getElementById('chatPopup').style.display = 'block';
        document.getElementById('chatButton').style.display = 'none'; // Hide the button when popup is open
    }

    // Close chat popup
    function closeChat() {
        document.getElementById('chatPopup').style.display = 'none';
        document.getElementById('chatButton').style.display = 'block'; // Show the button when popup is closed
    }

    // Send message function
    function sendMessage() {
        const message = document.getElementById('userInput').value;
        if (message.trim() !== '') {
            const chatContent = document.getElementById('chatContent');
            const userMessage = document.createElement('div');
            userMessage.textContent = message;
            chatContent.appendChild(userMessage);
            document.getElementById('userInput').value = '';

            // Simulate AI response
            const aiMessage = document.createElement('div');
            aiMessage.textContent = "AI: I'm here to listen. How can I assist you?";
            chatContent.appendChild(aiMessage);
            chatContent.scrollTop = chatContent.scrollHeight; // Scroll to bottom
        }
    }

    // Handle Voice Recognition for Microphone
    document.getElementById("startVoiceBtn").addEventListener("click", function () {
        const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.lang = 'en-US'; // Set language for recognition

        recognition.onstart = function () {
            console.log("Voice recognition started.");
        };

        recognition.onresult = function (event) {
            const speechResult = event.results[0][0].transcript; // Get the result from speech
            console.log("Recognized Speech: ", speechResult);
            document.getElementById("userInput").value = speechResult; // Set result to input field
        };

        recognition.onerror = function (event) {
            console.error("Error with voice recognition: ", event.error);
        };

        recognition.start();
    });

    // Handle Camera Functionality
    document.getElementById("startCameraBtn").addEventListener("click", function () {
        // Access the camera
        navigator.mediaDevices.getUserMedia({ video: true })
            .then(function (stream) {
                // Attach the video stream to a video element
                const videoElement = document.createElement('video');
                document.body.appendChild(videoElement);
                videoElement.srcObject = stream;
                videoElement.play();

                // Optionally, add a stop button to stop the video stream
                const stopButton = document.createElement('button');
                stopButton.innerHTML = "Stop Camera";
                stopButton.addEventListener('click', function () {
                    stream.getTracks().forEach(track => track.stop()); // Stop the camera stream
                    videoElement.remove(); // Remove the video element
                    stopButton.remove(); // Remove the stop button
                });
                document.body.appendChild(stopButton);
            })
            .catch(function (error) {
                console.error("Error accessing camera: ", error);
            });
    });
</script>
