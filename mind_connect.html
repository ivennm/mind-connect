<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mind Connect</title>
    <!-- Link to Font Awesome CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <!-- Your custom stylesheet -->
    <link rel="stylesheet" href="mind_connect.css">
</head>
<body>
    <!-- Navigation -->
    <header class="navigation">
        <div class="logo">Mind Connect</div>
        <div class="nav-controls">
            <div class="toggle-switch">
                <input type="checkbox" id="dark-mode">
                <label for="dark-mode"></label>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1>Welcome to Mind Connect</h1>
            <p>Your AI-powered companion for mental well-being, offering compassionate, 24/7 support and tailored guidance.</p>
        </div>
    </section>

    <!-- Smooth Intersection Curve -->
    <div class="curve"></div>

    <!-- About Us Section -->
    <section class="about-us">
        <div class="about-text">
            <h2>About Mind Connect</h2>
            <p>At Mind Connect, we believe that everyone deserves emotional support. Our AI chatbot is designed to listen, understand, and provide helpful responses that guide you through difficult moments. Whether it's a rough day or a need for someone to talk to, we're here for you â€” with empathy, always.</p>
            <p>We stand for a supportive, safe space for people to connect with their emotions, track mental health habits, and receive the comfort of knowing someone is always there to listen.</p>
        </div>
    </section>

    <!-- Connect Now Section -->
    <section class="connect-now">
        <div class="connect-text">
            <h2>Connect Now</h2>
            <p>Discover AI-driven emotional support with empathetic responses and smart habit tracking. Whether you're feeling stressed, anxious, or need advice, we're here to help you every step of the way.</p>
            <button class="chat-popup" onclick="openChat()">Chat With Our Bot</button>
        </div>
        <img src="{{ url_for('static', filename='artificial-intelligence_10471166.gif') }}" alt="AI Icon">
    </section>

    <!-- Another Curve for Smooth Transition -->
    <div class="curve flip"></div>

    <!-- Astro Bound Section -->
    <section class="astro-bound">
        <img src="rocket-game.png" alt="Astro Bound Game">
        <div class="astro-text">
            <h2>Astro Bound</h2>
            <p>Relax and play a space-themed adventure game designed to ease your mind and promote mindfulness.</p>
            <button class="play-button">Play Now</button>
        </div>
    </section>

    <!-- Floating Chatbot Button -->
    <button id="chatButton" class="chat-button" onclick="openChat()">Chat with our Bot</button>

    <!-- Chatbot Popup -->
    <div id="chatPopup" class="chat-popup">
        <div class="chat-header">
            <h3>AI Chatbot</h3>
            <button id="closeChat" class="close-btn" onclick="closeChat()">X</button>
        </div>
        <div id="chatContent" class="chat-content">
            <!-- Chat messages will appear here -->
        </div>
        <div class="chat-input">
            <input type="text" id="userInput" placeholder="Type your message..." onkeydown="checkEnter(event)">
            <div class="icon-buttons">
                <button class="icon-btn" id="startVoiceBtn">
                    <i class="fa fa-microphone"></i> <!-- Microphone Icon -->
                </button>
                <button id="startCameraBtn" class="icon-btn">
                    <i class="fas fa-camera"></i> <!-- FontAwesome camera icon -->
                </button>
                <button class="icon-btn" id="startCameraBtn" title="Start Camera">
                    <i class="fa fa-video-camera"></i> <!-- Camera Icon -->
                </button>
            </div>
        </div>
        <button class="send-btn" onclick="sendMessage()">Send</button>
    </div>

    <script>
        function openChat() {
            document.getElementById('chatPopup').style.display = 'block';
            document.getElementById('chatButton').style.display = 'none';
        }

        function closeChat() {
            document.getElementById('chatPopup').style.display = 'none';
            document.getElementById('chatButton').style.display = 'block';
        }

        function sendMessage() {
            const message = document.getElementById('userInput').value;
            if (message.trim() !== '') {
                const chatContent = document.getElementById('chatContent');
                const userMessage = document.createElement('div');
                userMessage.textContent = message;
                chatContent.appendChild(userMessage);
                document.getElementById('userInput').value = '';

                const aiMessage = document.createElement('div');
                aiMessage.textContent = "AI: I'm here to listen. How can I assist you?";
                chatContent.appendChild(aiMessage);
                chatContent.scrollTop = chatContent.scrollHeight;
            }
        }

        function checkEnter(event) {
            if (event.key === "Enter") {
                event.preventDefault();
                sendMessage();
            }
        }
        document.getElementById("userInput").addEventListener("keydown", checkEnter);

        document.getElementById("startVoiceBtn").addEventListener("click", function () {
            const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.lang = 'en-US';

            recognition.onstart = function () {
                console.log("Voice recognition started.");
            };

            recognition.onresult = function (event) {
                const speechResult = event.results[0][0].transcript;
                console.log("Recognized Speech: ", speechResult);
                document.getElementById("userInput").value = speechResult;
            };

            recognition.onerror = function (event) {
                console.error("Error with voice recognition: ", event.error);
            };

            recognition.start();
        });

        let cameraStream; // Store stream globally

document.getElementById("startCameraBtn").addEventListener("click", function () {
    // Create popup
    let cameraPopup = document.createElement("div");
    cameraPopup.id = "cameraPopup";
    cameraPopup.style.position = "fixed";
    cameraPopup.style.top = "50%";
    cameraPopup.style.left = "50%";
    cameraPopup.style.transform = "translate(-50%, -50%)";
    cameraPopup.style.background = "rgba(0, 0, 0, 0.9)";
    cameraPopup.style.padding = "20px";
    cameraPopup.style.borderRadius = "10px";
    cameraPopup.style.zIndex = "1000";
    cameraPopup.style.display = "flex";
    cameraPopup.style.flexDirection = "column";
    cameraPopup.style.alignItems = "center";

    let videoElement = document.createElement("video");
    videoElement.id = "cameraFeed";
    videoElement.autoplay = true;
    videoElement.style.width = "300px";
    videoElement.style.borderRadius = "10px";

    let closeButton = document.createElement("button");
    closeButton.innerText = "Close Camera";
    closeButton.style.marginTop = "10px";
    closeButton.style.padding = "8px";
    closeButton.style.border = "none";
    closeButton.style.background = "#ff4d4d";
    closeButton.style.color = "#fff";
    closeButton.style.cursor = "pointer";
    closeButton.style.borderRadius = "5px";

    closeButton.addEventListener("click", function () {
        if (cameraStream) {
            cameraStream.getTracks().forEach(track => track.stop()); // Stop the camera
        }
        cameraPopup.remove();
    });

    cameraPopup.appendChild(videoElement);
    cameraPopup.appendChild(closeButton);
    document.body.appendChild(cameraPopup);

    // Access the camera
    navigator.mediaDevices.getUserMedia({ video: true })
        .then(function (stream) {
            cameraStream = stream; // Store globally
            videoElement.srcObject = stream;
        })
        .catch(function (error) {
            console.error("Error accessing camera: ", error);
            cameraPopup.remove();
        });
});

    </script>
</body>
</html>
